title = "Communities"
url = "/communities"
layout = "default"
is_hidden = 0

[viewBag]
localeUrl[zh-CN] = "/zh-CN/communities"
localeUrl[ru] = "/ru/communities"
localeUrl[kk] = "/kk/communities"

[communityList]
limit = 0
detailPage = "community"
pageProperty = "communities"
==

<section class="prj-list-section layout_padding">
    <div class="container">
        <div class="prj-list-heading">
            <h2>{{ 'Community <span>Impact'|_ }}</span></h2>
        </div>

        <div class="prj-grid">
            {% for c in communityList.communities %}
                <article class="prj-card">
                    <div class="prj-thumb">
                        {% if c.thumb %}
                            <img src="{{ c.thumb }}" alt="{{ c.title }}" loading="lazy">
                            <div class="prj-thumb-overlay"></div>
                        {% else %}
                            <div class="prj-thumb-overlay"></div>
                        {% endif %}

                        <div class="prj-card-info">
                            <h3>{{ c.title }}</h3>
                            {# Если у вас есть location или другие поля в desc_list — можно вывести их здесь при необходимости #}
                        </div>
                    </div>

                    {# Ссылка на детальную — если компонент уже вернул c.url, используем его,
                       иначе формируем по slug по аналогии с projects.htm #}
                    <a href="{{ c.url ?: (this.page.url|replace({'/communities': '/community/' ~ c.slug})) }}" class="prj-card-link"></a>
                </article>
            {% else %}
                <p>{{ 'Communitie impacts not found'|_ }}</p>
            {% endfor %}
        </div>
    </div>
</section>
