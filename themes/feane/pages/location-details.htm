title = "Location Details"
url = "/location/:slug"
layout = "default"
is_hidden = 0

[viewBag]
localeUrl[zh-CN] = "/zh-CN/location/:slug"
localeUrl[ru]    = "/ru/location/:slug"
localeUrl[kk]    = "/kk/location/:slug"

[locationDetail]
slug = "{{ :slug }}"
==
{% if location %}
<div class="project_detail_section">
    <div class="container layout_padding2">
        <h1>{{ location.name }}</h1>
        <p>{{ location.address }}</p>

        {% if location.image %}
            <div class="location-image">
                <img
                    src="{{ location.image.path }}"
                    alt="{{ location.name }}"
                    loading="lazy"
                    class="js-gallery-thumb"
                    data-full="{{ location.image.path }}"
                    data-index="0"
                >
            </div>
        {% endif %}


        {% if location.lat and location.lng %}
            <div id="locationMap"
                data-lat="{{ location.lat }}"
                data-lng="{{ location.lng }}"
                style="width: 100%; height: 400px; margin-top: 20px; border-radius: 5px; overflow: hidden;">
            </div>
        {% endif %}

        <!-- Back to Locations Button -->
        <div class="btn_box layout_padding2 goto goto_en">
            <a href="/locations" class="btn_back">
                {{ 'View Other Locations'|_ }}
            </a>
        </div>

        <div class="btn_box layout_padding2 goto goto_ru">
            <a href="/ru/locations" class="btn_back">
                {{ 'View Other Locations'|_ }}
            </a>
        </div>

        <div class="btn_box layout_padding2 goto goto_kk">
            <a href="/kk/locations" class="btn_back">
                {{ 'View Other Locations'|_ }}
            </a>
        </div>

        <div class="btn_box layout_padding2 goto goto_zh-cn">
            <a href="/zh-cn/locations" class="btn_back">
                {{ 'View Other Locations'|_ }}
            </a>
        </div>

    </div>
</div>
<div id="photoModal" class="photo-modal">
    <div class="photo-modal-backdrop"></div>

    <button class="photo-modal-close" type="button">&times;</button>
    <button class="photo-modal-nav photo-modal-prev" type="button">‹</button>
    <button class="photo-modal-nav photo-modal-next" type="button">›</button>

    <div class="photo-modal-inner">
        <img id="photoModalImg" class="photo-modal-img" src="" alt="">
    </div>
</div>
{% else %}
<div class="container">
    <h2>{{ 'Location not found'|_ }}</h2>
</div>
{% endif %}



{% put scripts %}
    {% if location and location.lat and location.lng %}
        <script>
        document.addEventListener('DOMContentLoaded', function () {
            var mapEl = document.getElementById('locationMap');
            if (!mapEl) return;

            var lat = parseFloat(mapEl.dataset.lat);
            var lng = parseFloat(mapEl.dataset.lng);

            var map = L.map(mapEl).setView([lat, lng], 13);

            L.tileLayer(
                'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
                {
                    maxZoom: 19,
                    attribution: 'Tiles © Esri'
                }
            ).addTo(map);

            L.marker([lat, lng]).addTo(map)
                .bindPopup('{{ location.name|e('js') }}')
                .openPopup();
        });
        </script>
    {% endif %}
{% endput %}